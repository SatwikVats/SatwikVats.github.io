<!doctype html><html><head><title>Kubernetes</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><meta property="og:title" content="Kubernetes"><meta property="og:description" content="Introduction to Sample Post"><meta property="og:type" content="article"><meta property="og:url" content="https://satwikvats.github.io/posts/kubernetes/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-06-08T08:06:25+06:00"><meta property="article:modified_time" content="2020-06-08T08:06:25+06:00"><meta name=description content="Introduction to Sample Post"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/>Know me better..</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><a href=/posts/ansible/ title=Ansible>Ansible</a></li><li><a href=/posts/docker/ title=Docker>Docker</a></li><li><a href=/posts/github-actions/ title="Github Actions">Github Actions</a></li><li><a href=/posts/hugo/ title=Hugo>Hugo</a></li><li><a href=/posts/introduction/ title=Introduction>Introduction</a></li><li><a class=active href=/posts/kubernetes/ title=Kubernetes>Kubernetes</a></li><li><a href=/posts/my-venture-at-npbridge-solutions/ title="My Venture at NPBridge Solutions">My Venture at NPBridge Solutions</a></li><li><a href=/posts/netlify/ title=Netlify>Netlify</a></li><li><a href=/posts/terraform/ title=Terraform>Terraform</a></li><li><i class="fas fa-plus-circle"></i><a href=/posts/daily-updates/>Daily Updates</a><ul><li><a href=/posts/daily-updates/day19/ title="1 July">1 July</a></li><li><a href=/posts/daily-updates/day7/ title="15 June">15 June</a></li><li><a href=/posts/daily-updates/day8/ title="16 June">16 June</a></li><li><a href=/posts/daily-updates/day9/ title="17 June">17 June</a></li><li><a href=/posts/daily-updates/day10/ title="18 June">18 June</a></li><li><a href=/posts/daily-updates/day20/ title="2 July">2 July</a></li><li><a href=/posts/daily-updates/day11/ title="21 June">21 June</a></li><li><a href=/posts/daily-updates/day12/ title="22 June">22 June</a></li><li><a href=/posts/daily-updates/day16/ title="28 June">28 June</a></li><li><a href=/posts/daily-updates/day18/ title="30 June">30 June</a></li><li><a href=/posts/daily-updates/day21/ title="5 July">5 July</a></li><li><a href=/posts/daily-updates/day22/ title="6 July">6 July</a></li><li><a href=/posts/daily-updates/day23/ title="7 July">7 July</a></li><li><a href=/posts/daily-updates/day24/ title="8 July">8 July</a></li><li><a href=/posts/daily-updates/day25/ title="9 July">9 July</a></li><li><a href=/posts/daily-updates/day1/ title="Day 1">Day 1</a></li><li><a href=/posts/daily-updates/day2/ title="Day 2">Day 2</a></li><li><a href=/posts/daily-updates/day3/ title="Day 3">Day 3</a></li><li><a href=/posts/daily-updates/day4/ title="Day 4">Day 4</a></li><li><a href=/posts/daily-updates/day5/ title="Day 5">Day 5</a></li><li><a href=/posts/daily-updates/day6/ title="Day 6">Day 6</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://satwikvats.github.io/posts/kubernetes/hero.svg)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/default-avatar_hu1b14593c51b09e0fcd18693678a8f4ed_42371_120x120_fit_box_3.png alt="Author Image"><h5 class=author-name></h5><p>June 8, 2020</p></div><div class=title><h1>Kubernetes</h1></div><div class=post-content id=post-content><h1 id=kubernetes>Kubernetes</h1><ul><li><p>Spent some time on learning about Kubernetes.</p><ul><li>Its utility as a Container Management Tool.</li><li>Procedure of installation via three nodes- one master along with two slave nodes.</li></ul></li><li><p>Started working around with Kubernetes.</p><ul><li><p>Made a directory <code>kubernetesinstallation</code> for storing private keys.</p></li><li><p>Created a VM to be used as a Master Node for my Kubernetes installation process.</p><pre tabindex=0><code>aws ec2 run-instances --image-id ami-0c1a7f89451184c8b --count 1 --key-name masternodessh --instance-type t2.micro
</code></pre><script src=https://asciinema.org/a/TBAH4doSotdyhEBFSANzBPLvi.js id=asciicast-TBAH4doSotdyhEBFSANzBPLvi async></script></li></ul></li><li><p>First attempt to connect to my Master Node using SSH.</p><ul><li><p>Attempted connecting to my Master Node VM via SSH client but failed to do so, since my connection timed out.</p><pre tabindex=0><code>ssh -i masternodessh.pem ubuntu@ec2-13-234-225-150.ap-south-1.compute.amazonaws.com
</code></pre></li><li><p>To make sure that my private key is not publicly visible, used the following command. Also, the private key file can be downloaded just once and make sure that its in the same directory as your
working directory.</p><pre tabindex=0><code>chmod 400 masternodessh.pem
</code></pre><script src=https://asciinema.org/a/yQUixrAIOoGu3Nf8yjlUQ1lSe.js id=asciicast-yQUixrAIOoGu3Nf8yjlUQ1lSe async></script></li><li><p>Tried connecting using Ec2 Instance Connect but failed.</p></li></ul></li><li><p>Second attempt to connect to my Master Node using SSH.</p><ul><li><p>Terminated the previous instance and created a new one with subnet and security group.</p><pre tabindex=0><code>aws ec2 run-instances --image-id ami-0c1a7f89451184c8b --count 1 --key-name masternodessh --instance-type t2.micro --security-group-ids  --subnet-id subnet-0d373cd18c07e0145
</code></pre><script src=https://asciinema.org/a/qvkGqhecwLzaxOz7akOraX1s2.js id=asciicast-qvkGqhecwLzaxOz7akOraX1s2 async></script></li><li><p>Failed to connect via SSH. Later realised that my instance was linked to a private subnet and hence, I didn&rsquo;t get a public DNS.</p><pre tabindex=0><code>ssh -i &#34;masternodessh.pem&#34; ubuntu@10.0.1.84
</code></pre><script src=https://asciinema.org/a/ya23FcocfqeeplwOWeWatdiJi.js id=asciicast-ya23FcocfqeeplwOWeWatdiJi async></script></li></ul></li><li><p>Third attempt to connect to my Master Node using SSH.</p><ul><li><p>Attached an internet Gateway.</p><pre tabindex=0><code>aws ec2 attach-internet-gateway --internet-gateway-id igw-014783f25b2794337 --vpc-id vpc-0e595b592d80b7cf4
</code></pre></li><li><p>Enabled DNS hostnames in VPC settings and &lsquo;auto-assign IPV4 address&rsquo; in the Subnet settings to &lsquo;yes&rsquo;.</p></li><li><p>Terminated the previous instance and created a new one with same subnet and security group.
<script src=https://asciinema.org/a/lS26m0pGw27oVeLmjGhObPPKF.js id=asciicast-lS26m0pGw27oVeLmjGhObPPKF async></script></p></li><li><p>Failed again, despite managing to get a public DNS.
<script src=https://asciinema.org/a/HfG8cOfYQr1oosPfgZ5J9sdMN.js id=asciicast-HfG8cOfYQr1oosPfgZ5J9sdMN async></script></p></li><li><p>Attempted deploying Kubernetes cluster by following this <a href="https://www.youtube.com/watch?v=ndNKI5GBdd0">tutorial</a>.</p></li><li><p>Created a Master Node and established SSH connection.
<script src=https://asciinema.org/a/0YGqVFaWcGh5q2mth9Jc7QM86.js id=asciicast-0YGqVFaWcGh5q2mth9Jc7QM86 async></script></p></li><li><p>Installed AWS CLI and configured with my credentials.</p></li><li><p>To mask-off highly confidential credentials like secret access key on terminal, we may use the following commands.</p><pre tabindex=0><code>#Any user input provided on terminal is rendered invisible.
stty -echo
</code></pre><pre tabindex=0><code>#To return back to normal mode.
stty echo
</code></pre><script src=https://asciinema.org/a/PvjCw5Z1LeD9njd80xrgolOk4.js id=asciicast-PvjCw5Z1LeD9njd80xrgolOk4 async></script></li><li><p>Installed all the necessary packages including kubectl.</p><pre tabindex=0><code>curl -LO https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl
chmod +x ./kubectl
sudo mv ./kubectl /usr/local/bin/kubectl
curl -LO https://github.com/kubernetes/kops/releases/download/$(curl -s https://api.github.com/repos/kubernetes/kops/releases/latest | grep tag_name | cut -d &#39;&#34;&#39; -f 4)/kops-lin
ux-amd64
chmod +x kops-linux-amd64
sudo mv kops-linux-amd64 /usr/local/bin/kops
</code></pre></li><li><p>Started exploring about Route 53 since it was required in this method.
<script src=https://asciinema.org/a/WjzKnHwDTg7I7DOwhWaejHR7g.js id=asciicast-WjzKnHwDTg7I7DOwhWaejHR7g async></script></p></li><li><p>Since I found a simpler approach, terminated this instance and started afresh.</p></li></ul></li><li><p>References:</p><ul><li><a href=https://stackoverflow.com/questions/20941704/ec2-instance-has-no-public-dns>Possible reasons for not getting a public DNS for SSH client</a></li><li><a href="https://www.youtube.com/watch?v=8UqtMcX_kg0">SSH to EC2 Instances using Linux or Mac Tutorial</a></li></ul></li></ul><h1 id=test-post>Test post</h1></div><div class=btn-improve-page><a href=https://github.com/hugo-toha/hugo-toha.github.io/edit/main/content/posts/Kubernetes/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>
Improve this page</a></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/introduction/ title="Tools and Technologies" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i> Prev</div><div class=next-prev-text>Tools and Technologies</div></a></div><div class="col-md-6 next-article"><a href=/posts/my-venture-at-npbridge-solutions/ title="My venture at NPBridge Solutions" class="btn btn-outline-info"><div>Next <i class="fas fa-chevron-circle-right"></i></div><div class=next-prev-text>My venture at NPBridge Solutions</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=/#recent-posts>Recent Posts</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_3.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">© 2020 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script>
<script type=text/javascript src=/js/popper.min.js></script>
<script type=text/javascript src=/js/bootstrap.min.js></script>
<script type=text/javascript src=/js/navbar.js></script>
<script type=text/javascript src=/js/plyr.js></script>
<script type=text/javascript src=/js/main.js></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script>
<script src=/js/single.js></script>
<script>hljs.initHighlightingOnLoad()</script></body></html>